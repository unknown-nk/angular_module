import { __decorate } from "tslib";
import { Component, Input, Output, ElementRef, Renderer2, OnInit, OnDestroy, EventEmitter } from '@angular/core';
import { FBMLAttribute, FBMLComponent, FBMLInstanceMethod } from '../fbml-component';
/**
 * @name Embedded Video
 * @shortdesc Component to embed Facebook videos
 * @fbdoc https://developers.facebook.com/docs/plugins/embedded-video-player
 * @description Component to embed Facebook videos and control them.
 * @usage
 * ```html
 * <!-- basic usage -->
 * <fb-video href="https://www.facebook.com/facebook/videos/10153231379946729/"></fb-video>
 *
 * <!-- event emitters -->
 * <fb-video href="https://www.facebook.com/facebook/videos/10153231379946729/" (paused)="onVideoPaused($event)"></fb-video>
 * ```
 *
 * To manually interact with the video player, fetch it using `ViewChild`.
 *
 * ```ts
 * import { Component, ViewChild } from '@angular/core';
 * import { FBVideoComponent } from 'ngx-facebook-sdk';
 *
 * @Component(...)
 * export class MyComponent {
 *
 *   @ViewChild(FBVideoComponent) video: FBVideoComponent;
 *
 *   ngAfterViewInit() {
 *     this.video.play();
 *     this.video.pause();
 *     this.video.getVolume();
 *   }
 *
 * }
 *
 * ```
 */
let FBVideoComponent = class FBVideoComponent extends FBMLComponent {
    constructor(el, rnd) {
        super(el, rnd, 'fb-video');
        /**
         * Fired when video starts to play.
         */
        this.startedPlaying = new EventEmitter();
        /**
         * Fired when video pauses.
         */
        this.paused = new EventEmitter();
        /**
         *
         Fired when video finishes playing.
         */
        this.finishedPlaying = new EventEmitter();
        /**
         * Fired when video starts to buffer.
         */
        this.startedBuffering = new EventEmitter();
        /**
         * Fired when video recovers from buffering.
         */
        this.finishedBuffering = new EventEmitter();
        /**
         * Fired when an error occurs on the video.
         */
        this.error = new EventEmitter();
        this._listeners = [];
        this.nativeElement.id = this._id = 'video-' + String(Math.floor((Math.random() * 10000) + 1));
    }
    /**
     * @hidden
     */
    ngOnInit() {
        FB.Event.subscribe('xfbml.ready', (msg) => {
            if (msg.type === 'video' && msg.id === this._id) {
                this._instance = msg.instance;
                this._listeners.push(this._instance.subscribe('startedPlaying', (e) => this.startedPlaying.emit(e)), this._instance.subscribe('paused', (e) => this.paused.emit(e)), this._instance.subscribe('finishedPlaying', (e) => this.finishedPlaying.emit(e)), this._instance.subscribe('startedBuffering', (e) => this.startedBuffering.emit(e)), this._instance.subscribe('finishedBuffering', (e) => this.finishedBuffering.emit(e)), this._instance.subscribe('error', (e) => this.error.emit(e)));
            }
        });
    }
    /**
     * @hidden
     */
    ngOnDestroy() {
        this._listeners.forEach(l => {
            if (typeof l.release === 'function') {
                l.release();
            }
        });
    }
    /**
     * Plays the video.
     */
    play() { }
    /**
     * Pauses the video.
     */
    pause() { }
    /**
     * Seeks to specified position.
     * @param seconds {number}
     */
    seek(seconds) { }
    /**
     * Mute the video.
     */
    mute() { }
    /**
     * Unmute the video.
     */
    unmute() { }
    /**
     * Returns true if video is muted, false if not.
     */
    isMuted() { return; }
    /**
     * Set the volume
     * @param volume
     */
    setVolume(volume) { }
    /**
     * Get the volume
     */
    getVolume() { return; }
    /**
     * Returns the current video time position in seconds
     */
    getCurrentPosition() { }
    /**
     * Returns the video duration in seconds
     */
    getDuration() { }
};
FBVideoComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 }
];
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "href", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "allowfullscreen", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "autoplay", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "width", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "showText", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "showCaptions", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "startedPlaying", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "paused", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "finishedPlaying", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "startedBuffering", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "finishedBuffering", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "error", void 0);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "play", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "pause", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "seek", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "mute", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "unmute", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "isMuted", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "setVolume", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "getVolume", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "getCurrentPosition", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "getDuration", null);
FBVideoComponent = __decorate([
    Component({
        selector: 'fb-video',
        template: ''
    })
], FBVideoComponent);
export { FBVideoComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmItdmlkZW8uanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtZmFjZWJvb2svIiwic291cmNlcyI6WyJjb21wb25lbnRzL2ZiLXZpZGVvL2ZiLXZpZGVvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqSCxPQUFPLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBR3JGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBa0NHO0FBS0gsSUFBYSxnQkFBZ0IsR0FBN0IsTUFBYSxnQkFBaUIsU0FBUSxhQUFhO0lBdUZqRCxZQUNFLEVBQWMsRUFDZCxHQUFjO1FBRWQsS0FBSyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7UUE3QzdCOztXQUVHO1FBRUgsbUJBQWMsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUU1RDs7V0FFRztRQUVILFdBQU0sR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUVwRDs7O1dBR0c7UUFFSCxvQkFBZSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBRTdEOztXQUVHO1FBRUgscUJBQWdCLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFFOUQ7O1dBRUc7UUFFSCxzQkFBaUIsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUUvRDs7V0FFRztRQUVILFVBQUssR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUkzQyxlQUFVLEdBQVUsRUFBRSxDQUFDO1FBTzdCLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsUUFBUSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENB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QU9kO0lBRkMsS0FBSyxFQUFFO0lBQ1AsYUFBYTtrREFDSTtBQU9sQjtJQUZDLEtBQUssRUFBRTtJQUNQLGFBQWE7c0RBQ1E7QUFNdEI7SUFEQyxNQUFNLEVBQUU7d0RBQ21EO0FBTTVEO0lBREMsTUFBTSxFQUFFO2dEQUMyQztBQU9wRDtJQURDLE1BQU0sRUFBRTt5REFDb0Q7QUFNN0Q7SUFEQyxNQUFNLEVBQUU7MERBQ3FEO0FBTTlEO0lBREMsTUFBTSxFQUFFOzJEQUNzRDtBQU0vRDtJQURDLE1BQU0sRUFBRTsrQ0FDMEM7QUFnRG5EO0lBREMsa0JBQWtCOzRDQUNWO0FBTVQ7SUFEQyxrQkFBa0I7NkNBQ1Q7QUFPVjtJQURDLGtCQUFrQjs0Q0FDSztBQU14QjtJQURDLGtCQUFrQjs0Q0FDVjtBQU1UO0lBREMsa0JBQWtCOzhDQUNSO0FBTVg7SUFEQyxrQkFBa0I7K0NBQ1c7QUFPOUI7SUFEQyxrQkFBa0I7aURBQ1M7QUFNNUI7SUFEQyxrQkFBa0I7aURBQ1k7QUFNL0I7SUFEQyxrQkFBa0I7MERBQ0k7QUFNdkI7SUFEQyxrQkFBa0I7bURBQ0g7QUF6TEwsZ0JBQWdCO0lBSjVCLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSxVQUFVO1FBQ3BCLFFBQVEsRUFBRSxFQUFFO0tBQ2IsQ0FBQztHQUNXLGdCQUFnQixDQTJMNUI7U0EzTFksZ0JBQWdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIE9uSW5pdCwgT25EZXN0cm95LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZCTUxBdHRyaWJ1dGUsIEZCTUxDb21wb25lbnQsIEZCTUxJbnN0YW5jZU1ldGhvZCB9IGZyb20gJy4uL2ZibWwtY29tcG9uZW50JztcbmRlY2xhcmUgdmFyIEZCOiBhbnk7XG5cbi8qKlxuICogQG5hbWUgRW1iZWRkZWQgVmlkZW9cbiAqIEBzaG9ydGRlc2MgQ29tcG9uZW50IHRvIGVtYmVkIEZhY2Vib29rIHZpZGVvc1xuICogQGZiZG9jIGh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9wbHVnaW5zL2VtYmVkZGVkLXZpZGVvLXBsYXllclxuICogQGRlc2NyaXB0aW9uIENvbXBvbmVudCB0byBlbWJlZCBGYWNlYm9vayB2aWRlb3MgYW5kIGNvbnRyb2wgdGhlbS5cbiAqIEB1c2FnZVxuICogYGBgaHRtbFxuICogPCEtLSBiYXNpYyB1c2FnZSAtLT5cbiAqIDxmYi12aWRlbyBocmVmPVwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2ZhY2Vib29rL3ZpZGVvcy8xMDE1MzIzMTM3OTk0NjcyOS9cIj48L2ZiLXZpZGVvPlxuICpcbiAqIDwhLS0gZXZlbnQgZW1pdHRlcnMgLS0+XG4gKiA8ZmItdmlkZW8gaHJlZj1cImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9mYWNlYm9vay92aWRlb3MvMTAxNTMyMzEzNzk5NDY3MjkvXCIgKHBhdXNlZCk9XCJvblZpZGVvUGF1c2VkKCRldmVudClcIj48L2ZiLXZpZGVvPlxuICogYGBgXG4gKlxuICogVG8gbWFudWFsbHkgaW50ZXJhY3Qgd2l0aCB0aGUgdmlkZW8gcGxheWVyLCBmZXRjaCBpdCB1c2luZyBgVmlld0NoaWxkYC5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbiAqIGltcG9ydCB7IEZCVmlkZW9Db21wb25lbnQgfSBmcm9tICduZ3gtZmFjZWJvb2stc2RrJztcbiAqXG4gKiBAQ29tcG9uZW50KC4uLilcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCB7XG4gKlxuICogICBAVmlld0NoaWxkKEZCVmlkZW9Db21wb25lbnQpIHZpZGVvOiBGQlZpZGVvQ29tcG9uZW50O1xuICpcbiAqICAgbmdBZnRlclZpZXdJbml0KCkge1xuICogICAgIHRoaXMudmlkZW8ucGxheSgpO1xuICogICAgIHRoaXMudmlkZW8ucGF1c2UoKTtcbiAqICAgICB0aGlzLnZpZGVvLmdldFZvbHVtZSgpO1xuICogICB9XG4gKlxuICogfVxuICpcbiAqIGBgYFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdmYi12aWRlbycsXG4gIHRlbXBsYXRlOiAnJ1xufSlcbmV4cG9ydCBjbGFzcyBGQlZpZGVvQ29tcG9uZW50IGV4dGVuZHMgRkJNTENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcblxuICBwcml2YXRlIF9pbnN0YW5jZTogYW55O1xuXG4gIC8qKlxuICAgKiBUaGUgYWJzb2x1dGUgVVJMIG9mIHRoZSB2aWRlby5cbiAgICovXG4gIEBJbnB1dCgpXG4gIEBGQk1MQXR0cmlidXRlXG4gIGhyZWY6IHN0cmluZztcblxuICAvKipcbiAgICogQWxsb3cgdGhlIHZpZGVvIHRvIGJlIHBsYXllZCBpbiBmdWxsc2NyZWVuIG1vZGUuIENhbiBiZSBmYWxzZSBvciB0cnVlLiBEZWZhdWx0cyB0byBmYWxzZTtcbiAgICovXG4gIEBJbnB1dCgpXG4gIEBGQk1MQXR0cmlidXRlXG4gIGFsbG93ZnVsbHNjcmVlbjogYm9vbGVhbjtcblxuICAvKipcbiAgICogQXV0b21hdGljYWxseSBzdGFydCBwbGF5aW5nIHRoZSB2aWRlbyB3aGVuIHRoZSBwYWdlIGxvYWRzLiBUaGUgdmlkZW8gd2lsbCBiZSBwbGF5ZWQgd2l0aG91dCBzb3VuZCAobXV0ZWQpLiBQZW9wbGUgY2FuIHR1cm4gb24gc291bmQgdmlhIHRoZSB2aWRlbyBwbGF5ZXIgY29udHJvbHMuIFRoaXMgc2V0dGluZyBkb2VzIG5vdCBhcHBseSB0byBtb2JpbGUgZGV2aWNlcy4gQ2FuIGJlIGZhbHNlIG9yIHRydWUuIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgKi9cbiAgQElucHV0KClcbiAgQEZCTUxBdHRyaWJ1dGVcbiAgYXV0b3BsYXk6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSB3aWR0aCBvZiB0aGUgdmlkZW8gY29udGFpbmVyLiBNaW4uIDIyMHB4LlxuICAgKi9cbiAgQElucHV0KClcbiAgQEZCTUxBdHRyaWJ1dGVcbiAgd2lkdGg6IHN0cmluZztcblxuICAvKipcbiAgICogU2V0IHRvIHRydWUgdG8gaW5jbHVkZSB0aGUgdGV4dCBmcm9tIHRoZSBGYWNlYm9vayBwb3N0IGFzc29jaWF0ZWQgd2l0aCB0aGUgdmlkZW8sIGlmIGFueS5cbiAgICovXG4gIEBJbnB1dCgpXG4gIEBGQk1MQXR0cmlidXRlXG4gIHNob3dUZXh0OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBTZXQgdG8gdHJ1ZSB0byBzaG93IGNhcHRpb25zIChpZiBhdmFpbGFibGUpIGJ5IGRlZmF1bHQuIENhcHRpb25zIGFyZSBvbmx5IGF2YWlsYWJsZSBvbiBkZXNrdG9wLlxuICAgKi9cbiAgQElucHV0KClcbiAgQEZCTUxBdHRyaWJ1dGVcbiAgc2hvd0NhcHRpb25zOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHZpZGVvIHN0YXJ0cyB0byBwbGF5LlxuICAgKi9cbiAgQE91dHB1dCgpXG4gIHN0YXJ0ZWRQbGF5aW5nOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHZpZGVvIHBhdXNlcy5cbiAgICovXG4gIEBPdXRwdXQoKVxuICBwYXVzZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLyoqXG4gICAqXG4gICBGaXJlZCB3aGVuIHZpZGVvIGZpbmlzaGVzIHBsYXlpbmcuXG4gICAqL1xuICBAT3V0cHV0KClcbiAgZmluaXNoZWRQbGF5aW5nOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHZpZGVvIHN0YXJ0cyB0byBidWZmZXIuXG4gICAqL1xuICBAT3V0cHV0KClcbiAgc3RhcnRlZEJ1ZmZlcmluZzogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiB2aWRlbyByZWNvdmVycyBmcm9tIGJ1ZmZlcmluZy5cbiAgICovXG4gIEBPdXRwdXQoKVxuICBmaW5pc2hlZEJ1ZmZlcmluZzogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgb24gdGhlIHZpZGVvLlxuICAgKi9cbiAgQE91dHB1dCgpXG4gIGVycm9yOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIHByaXZhdGUgX2lkOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfbGlzdGVuZXJzOiBhbnlbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGVsOiBFbGVtZW50UmVmLFxuICAgIHJuZDogUmVuZGVyZXIyXG4gICkge1xuICAgIHN1cGVyKGVsLCBybmQsICdmYi12aWRlbycpO1xuICAgIHRoaXMubmF0aXZlRWxlbWVudC5pZCA9IHRoaXMuX2lkID0gJ3ZpZGVvLScgKyBTdHJpbmcoTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwMDAwKSArIDEpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBuZ09uSW5pdCgpIHtcbiAgICBGQi5FdmVudC5zdWJzY3JpYmUoJ3hmYm1sLnJlYWR5JywgKG1zZzogYW55KSA9PiB7XG4gICAgICBpZiAobXNnLnR5cGUgPT09ICd2aWRlbycgJiYgbXNnLmlkID09PSB0aGlzLl9pZCkge1xuICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG1zZy5pbnN0YW5jZTtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2goXG4gICAgICAgICAgdGhpcy5faW5zdGFuY2Uuc3Vic2NyaWJlKCdzdGFydGVkUGxheWluZycsIChlOiBhbnkpID0+IHRoaXMuc3RhcnRlZFBsYXlpbmcuZW1pdChlKSksXG4gICAgICAgICAgdGhpcy5faW5zdGFuY2Uuc3Vic2NyaWJlKCdwYXVzZWQnLCAoZTogYW55KSA9PiB0aGlzLnBhdXNlZC5lbWl0KGUpKSxcbiAgICAgICAgICB0aGlzLl9pbnN0YW5jZS5zdWJzY3JpYmUoJ2ZpbmlzaGVkUGxheWluZycsIChlOiBhbnkpID0+IHRoaXMuZmluaXNoZWRQbGF5aW5nLmVtaXQoZSkpLFxuICAgICAgICAgIHRoaXMuX2luc3RhbmNlLnN1YnNjcmliZSgnc3RhcnRlZEJ1ZmZlcmluZycsIChlOiBhbnkpID0+IHRoaXMuc3RhcnRlZEJ1ZmZlcmluZy5lbWl0KGUpKSxcbiAgICAgICAgICB0aGlzLl9pbnN0YW5jZS5zdWJzY3JpYmUoJ2ZpbmlzaGVkQnVmZmVyaW5nJywgKGU6IGFueSkgPT4gdGhpcy5maW5pc2hlZEJ1ZmZlcmluZy5lbWl0KGUpKSxcbiAgICAgICAgICB0aGlzLl9pbnN0YW5jZS5zdWJzY3JpYmUoJ2Vycm9yJywgKGU6IGFueSkgPT4gdGhpcy5lcnJvci5lbWl0KGUpKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGwgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBsLnJlbGVhc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgbC5yZWxlYXNlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUGxheXMgdGhlIHZpZGVvLlxuICAgKi9cbiAgQEZCTUxJbnN0YW5jZU1ldGhvZFxuICBwbGF5KCkge31cblxuICAvKipcbiAgICogUGF1c2VzIHRoZSB2aWRlby5cbiAgICovXG4gIEBGQk1MSW5zdGFuY2VNZXRob2RcbiAgcGF1c2UoKSB7fVxuXG4gIC8qKlxuICAgKiBTZWVrcyB0byBzcGVjaWZpZWQgcG9zaXRpb24uXG4gICAqIEBwYXJhbSBzZWNvbmRzIHtudW1iZXJ9XG4gICAqL1xuICBARkJNTEluc3RhbmNlTWV0aG9kXG4gIHNlZWsoc2Vjb25kczogbnVtYmVyKSB7fVxuXG4gIC8qKlxuICAgKiBNdXRlIHRoZSB2aWRlby5cbiAgICovXG4gIEBGQk1MSW5zdGFuY2VNZXRob2RcbiAgbXV0ZSgpIHt9XG5cbiAgLyoqXG4gICAqIFVubXV0ZSB0aGUgdmlkZW8uXG4gICAqL1xuICBARkJNTEluc3RhbmNlTWV0aG9kXG4gIHVubXV0ZSgpIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB2aWRlbyBpcyBtdXRlZCwgZmFsc2UgaWYgbm90LlxuICAgKi9cbiAgQEZCTUxJbnN0YW5jZU1ldGhvZFxuICBpc011dGVkKCk6IGJvb2xlYW4geyByZXR1cm47IH1cblxuICAvKipcbiAgICogU2V0IHRoZSB2b2x1bWVcbiAgICogQHBhcmFtIHZvbHVtZVxuICAgKi9cbiAgQEZCTUxJbnN0YW5jZU1ldGhvZFxuICBzZXRWb2x1bWUodm9sdW1lOiBudW1iZXIpIHt9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdm9sdW1lXG4gICAqL1xuICBARkJNTEluc3RhbmNlTWV0aG9kXG4gIGdldFZvbHVtZSgpOiBudW1iZXIgeyByZXR1cm47IH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCB2aWRlbyB0aW1lIHBvc2l0aW9uIGluIHNlY29uZHNcbiAgICovXG4gIEBGQk1MSW5zdGFuY2VNZXRob2RcbiAgZ2V0Q3VycmVudFBvc2l0aW9uKCkge31cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmlkZW8gZHVyYXRpb24gaW4gc2Vjb25kc1xuICAgKi9cbiAgQEZCTUxJbnN0YW5jZU1ldGhvZFxuICBnZXREdXJhdGlvbigpIHt9XG5cbn1cbiJdfQ==
{"ast":null,"code":"import html2canvas from 'html2canvas';\nimport * as i0 from \"@angular/core\";\nconst _c0 = [\"shareArea\"];\nclass ShareComponent {\n  constructor() {\n    this.afterText = '';\n  }\n  ngOnInit() {}\n  shareButton() {\n    // const img:File[] =Object.freeze(Array.from(this.shareImage))\n    // const shareData = {\n    //   title: '測試',\n    //   text: '我在測試分享',\n    //   url: 'https://www.youtube.com/?gl=TW&hl=zh-tw',\n    //   // files: img,\n    // };\n    let file = new File([this.blobContent], 'image.png', {\n      type: this.blobContent.type\n    });\n    let filesArray = [file];\n    console.log(navigator.canShare({\n      files: filesArray\n    }));\n    if (navigator.canShare && navigator.canShare({\n      files: filesArray\n    })) {\n      navigator.share({\n        files: filesArray\n      }).then(() => {\n        this.afterText = '分享成功';\n        console.log('success');\n      }).catch(error => {\n        this.afterText = '分享失敗';\n        console.log('error', error);\n      });\n    } else {\n      console.log('失敗');\n    }\n    // if (navigator.share) {\n    //   navigator\n    //     .share(shareData)\n    //     .then(() => {\n    //       this.afterText = '分享成功';\n    //       console.log('success');\n    //     })\n    //     .catch((error) => {\n    //       this.afterText = '分享失敗';\n    //       console.log('error', error);\n    //     });\n    // }\n  }\n\n  changeImg() {\n    html2canvas(this.shareArea.nativeElement).then(canvas => {\n      // debugger;\n      this.shareImage = canvas.toDataURL();\n      console.log('canvas.toDataURL() -->' + this.shareImage);\n      // document.body.appendChild(canvas);\n      canvas.toBlob(blob => {\n        if (blob) {\n          this.blobContent = blob;\n          // console.log(this.blobContent);\n          // 添加条件判断\n          var reader = new FileReader();\n          // debugger;\n          reader.readAsDataURL(blob);\n          reader.onloadend = function () {\n            let base64data = reader.result;\n            console.log('Base64--> ' + base64data);\n          };\n        }\n      });\n    });\n  }\n}\nShareComponent.ɵfac = function ShareComponent_Factory(t) {\n  return new (t || ShareComponent)();\n};\nShareComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ShareComponent,\n  selectors: [[\"app-share\"]],\n  viewQuery: function ShareComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.shareArea = _t.first);\n    }\n  },\n  decls: 30,\n  vars: 2,\n  consts: [[1, \"flex\", \"flex-col\", \"items-center\"], [1, \"share\"], [\"shareArea\", \"\"], [1, \"flex\", \"justify-center\"], [\"type\", \"text\", \"placeholder\", \"\\u53EF\\u8F38\\u5165\\u6587\\u5B57\"], [1, \"share_icon\", \"flex\", \"justify-around\"], [1, \"bg-blue-500\", \"hover:bg-blue-700\", \"text-white\", \"font-bold\", \"py-2\", \"px-4\", \"rounded\", 3, \"click\"], [2, \"color\", \"red\"], [3, \"src\"]],\n  template: function ShareComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"share works!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1, 2)(5, \"h1\");\n      i0.ɵɵtext(6, \"\\u6211\\u662F\\u8981\\u5206\\u4EAB\\u7684\\u5340\\u584A\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"p\");\n      i0.ɵɵtext(8, \"\\u6392\\u884C\\u699C\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"p\");\n      i0.ɵɵtext(10, \"\\u7B2C\\u4E00\\u540D:OOO\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"p\");\n      i0.ɵɵtext(12, \"\\u7B2C\\u4E8C\\u540D:XXX\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"p\");\n      i0.ɵɵtext(14, \"\\u7B2C\\u4E09\\u540D:VVV\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"br\");\n      i0.ɵɵelementStart(16, \"div\", 3);\n      i0.ɵɵelement(17, \"input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"br\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 5)(20, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function ShareComponent_Template_button_click_20_listener() {\n        return ctx.shareButton();\n      });\n      i0.ɵɵtext(21, \" \\u7ACB\\u5373\\u5206\\u4EAB \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"span\", 7);\n      i0.ɵɵtext(23);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(24, \"div\")(25, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function ShareComponent_Template_button_click_25_listener() {\n        return ctx.changeImg();\n      });\n      i0.ɵɵtext(26, \" \\u622A\\u5716 \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"h1\");\n      i0.ɵɵtext(28, \"\\u67E5\\u770B\\u622A\\u5716\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(29, \"img\", 8);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(23);\n      i0.ɵɵtextInterpolate(ctx.afterText);\n      i0.ɵɵadvance(6);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.shareImage, i0.ɵɵsanitizeUrl);\n    }\n  },\n  styles: [\".share[_ngcontent-%COMP%] {\\n  border: 1px solid #333;\\n  height: 300px;\\n  width: 200px;\\n  text-align: center;\\n}\\n\\n.share_icon[_ngcontent-%COMP%] {\\n  width: 200px;\\n  margin-top: 10px;\\n  text-align: center;\\n}\\n\\n.fb[_ngcontent-%COMP%] {\\n  width: 30px;\\n}\\n\\n.ig[_ngcontent-%COMP%] {\\n  margin-left: 30px;\\n  width: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbWFpbi9zaGFyZS9zaGFyZS5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uLy4uLy4uLyVFNiU5NiU4NyVFNCVCQiVCNi9HaXRIdWIvYW5ndWxhci9hbmd1bGFyX21vZHVsZS9zcmMvYXBwL21haW4vc2hhcmUvc2hhcmUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBQTtFQUNBLGFBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0FDQ0Y7O0FERUE7RUFDRSxXQUFBO0FDQ0Y7O0FERUE7RUFDRSxpQkFBQTtFQUNBLFdBQUE7QUNDRiIsInNvdXJjZXNDb250ZW50IjpbIi5zaGFyZSB7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgIzMzMztcclxuICBoZWlnaHQ6IDMwMHB4O1xyXG4gIHdpZHRoOiAyMDBweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5zaGFyZV9pY29uIHtcclxuICB3aWR0aDogMjAwcHg7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5mYiB7XHJcbiAgd2lkdGg6IDMwcHg7XHJcbn1cclxuXHJcbi5pZyB7XHJcbiAgbWFyZ2luLWxlZnQ6IDMwcHg7XHJcbiAgd2lkdGg6IDMwcHg7XHJcbn1cclxuIiwiLnNoYXJlIHtcbiAgYm9yZGVyOiAxcHggc29saWQgIzMzMztcbiAgaGVpZ2h0OiAzMDBweDtcbiAgd2lkdGg6IDIwMHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5zaGFyZV9pY29uIHtcbiAgd2lkdGg6IDIwMHB4O1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5mYiB7XG4gIHdpZHRoOiAzMHB4O1xufVxuXG4uaWcge1xuICBtYXJnaW4tbGVmdDogMzBweDtcbiAgd2lkdGg6IDMwcHg7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { ShareComponent };","map":{"version":3,"names":["html2canvas","ShareComponent","constructor","afterText","ngOnInit","shareButton","file","File","blobContent","type","filesArray","console","log","navigator","canShare","files","share","then","catch","error","changeImg","shareArea","nativeElement","canvas","shareImage","toDataURL","toBlob","blob","reader","FileReader","readAsDataURL","onloadend","base64data","result","selectors","viewQuery","ShareComponent_Query","rf","ctx","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","ShareComponent_Template_button_click_20_listener","ShareComponent_Template_button_click_25_listener","ɵɵadvance","ɵɵtextInterpolate","ɵɵpropertyInterpolate","ɵɵsanitizeUrl"],"sources":["C:\\Users\\nueut\\OneDrive\\文件\\GitHub\\angular\\angular_module\\src\\app\\main\\share\\share.component.ts","C:\\Users\\nueut\\OneDrive\\文件\\GitHub\\angular\\angular_module\\src\\app\\main\\share\\share.component.html"],"sourcesContent":["import { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport html2canvas from 'html2canvas';\r\n\r\n@Component({\r\n  selector: 'app-share',\r\n  templateUrl: './share.component.html',\r\n  styleUrls: ['./share.component.scss'],\r\n})\r\nexport class ShareComponent {\r\n  @ViewChild('shareArea', { static: true }) shareArea!: ElementRef;\r\n  shareImage: any;\r\n  afterText = '';\r\n  blobContent!: Blob;\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  shareButton() {\r\n    // const img:File[] =Object.freeze(Array.from(this.shareImage))\r\n    // const shareData = {\r\n    //   title: '測試',\r\n    //   text: '我在測試分享',\r\n    //   url: 'https://www.youtube.com/?gl=TW&hl=zh-tw',\r\n    //   // files: img,\r\n    // };\r\n    let file = new File([this.blobContent], 'image.png', {\r\n      type: this.blobContent.type,\r\n    });\r\n    let filesArray = [file];\r\n    console.log(navigator.canShare({ files: filesArray }));\r\n\r\n    if (navigator.canShare && navigator.canShare({ files: filesArray })) {\r\n      navigator\r\n        .share({\r\n          files: filesArray,\r\n        })\r\n        .then(() => {\r\n          this.afterText = '分享成功';\r\n          console.log('success');\r\n        })\r\n        .catch((error) => {\r\n          this.afterText = '分享失敗';\r\n          console.log('error', error);\r\n        });\r\n    } else {\r\n      console.log('失敗');\r\n    }\r\n\r\n    // if (navigator.share) {\r\n    //   navigator\r\n    //     .share(shareData)\r\n    //     .then(() => {\r\n    //       this.afterText = '分享成功';\r\n    //       console.log('success');\r\n    //     })\r\n    //     .catch((error) => {\r\n    //       this.afterText = '分享失敗';\r\n    //       console.log('error', error);\r\n    //     });\r\n    // }\r\n  }\r\n\r\n  changeImg() {\r\n    html2canvas(this.shareArea.nativeElement).then((canvas) => {\r\n      // debugger;\r\n      this.shareImage = canvas.toDataURL();\r\n      console.log('canvas.toDataURL() -->' + this.shareImage);\r\n      // document.body.appendChild(canvas);\r\n\r\n      canvas.toBlob((blob) => {\r\n        if (blob) {\r\n          this.blobContent = blob;\r\n          // console.log(this.blobContent);\r\n\r\n          // 添加条件判断\r\n          var reader = new FileReader();\r\n          // debugger;\r\n          reader.readAsDataURL(blob);\r\n          reader.onloadend = function () {\r\n            let base64data = reader.result;\r\n            console.log('Base64--> ' + base64data);\r\n          };\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n","<p>share works!</p>\r\n<div class=\"flex flex-col items-center\">\r\n  <div #shareArea class=\"share\">\r\n    <h1>我是要分享的區塊</h1>\r\n    <p>排行榜</p>\r\n    <p>第一名:OOO</p>\r\n    <p>第二名:XXX</p>\r\n    <p>第三名:VVV</p>\r\n    <br />\r\n    <div class=\"flex justify-center\">\r\n      <input type=\"text\" placeholder=\"可輸入文字\" />\r\n    </div>\r\n\r\n    <br />\r\n  </div>\r\n  <div class=\"share_icon flex justify-around\">\r\n    <button\r\n      class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\r\n      (click)=\"shareButton()\"\r\n    >\r\n      立即分享\r\n    </button>\r\n\r\n    <span style=\"color: red\">{{ afterText }}</span>\r\n  </div>\r\n</div>\r\n\r\n<div>\r\n  <button\r\n    class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\r\n    (click)=\"changeImg()\"\r\n  >\r\n    截圖\r\n  </button>\r\n  <h1>查看截圖</h1>\r\n  <img src=\"{{ shareImage }}\" />\r\n</div>\r\n<!-- https://www.facebook.com/sharer.php?u=https://www.google.com.tw/?hl=zh_TW -->\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}